(()=>{"use strict";var e={baseUrl:"https://nomoreparties.co/v1/wff-cohort-14",headers:{authorization:"ab022e1a-b80f-4939-8f48-ddab79fbed68","Content-Type":"application/json"}},t=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},n=function(n){return fetch("".concat(e.baseUrl,"/cards/likes/").concat(n),{method:"PUT",headers:e.headers}).then(t)},r=function(n){return fetch("".concat(e.baseUrl,"/cards/likes/").concat(n),{method:"DELETE",headers:e.headers}).then(t)},o=function(e,t,n,r,o,c,a){var i=t.querySelector(".places__item").cloneNode(!0),l=i.querySelector(".card__image"),s=i.querySelector(".card__title"),d=i.querySelector(".card__delete-button"),f=i.querySelector(".card__like-button"),p=i.querySelector(".card__like-container");return l.src=e.link,l.alt=e.name,s.textContent=e.name,e.owner._id===c?d.addEventListener("click",(function(){n(e._id,i)})):d.style.display="none",l.addEventListener("click",(function(){r(e.name,e.link)})),f.addEventListener("click",(function(){a(f,e._id,p)})),o(p,e.likes.length),e.likes.some((function(e){return e._id===c}))&&u(f),i},c=function(n,r){(function(n){return fetch("".concat(e.baseUrl,"/cards/").concat(n),{method:"DELETE",headers:e.headers}).then(t)})(n).then((function(){a(r)})).catch((function(e){console.error(e)}))},a=function(e){e.remove()},i=function(e,t,o){(e.classList.contains("card__like-button_is-active")?r:n)(t).then((function(t){u(e),l(o,t.likes.length)})).catch((function(e){return console.error(e)}))},u=function(e){e.classList.toggle("card__like-button_is-active")},l=function(e,t){e.textContent=t},s=function(e){e.classList.add("popup_is-opened"),e.classList.add("popup_is-animated");var t=e.querySelector(".popup__close");window.addEventListener("keydown",p),e.addEventListener("click",m),t.addEventListener("click",f)},d=function(e){e.classList.remove("popup_is-opened"),window.removeEventListener("keydown",p),e.removeEventListener("click",m),e.querySelector(".popup__close").removeEventListener("click",f)},f=function(e){var t=document.querySelector(".popup_is-opened");d(t)},p=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");d(t)}},m=function(e){e.target===e.currentTarget&&d(e.currentTarget)},v=function(e,t,n,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r.inputErrorClass),o.classList.add(r.errorClass),o.textContent=n},y=function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),r.classList.remove(n.errorClass),r.textContent=""},h=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(n.inactiveButtonClass)):(t.disabled=!0,t.classList.add(n.inactiveButtonClass))},_=function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.forEach((function(n){y(e,n,t)})),h(n,r,t)};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S="",E="",k={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button-not-active",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error-active"},q=document.querySelector(".places__list"),L=document.querySelector(".popup_type_edit"),g=document.querySelector(".profile__edit-button"),C=document.querySelector(".profile__add-button"),A=document.querySelector(".popup_type_new-card"),w=document.querySelector(".profile__title"),x=document.querySelector(".profile__description"),T=document.forms["edit-profile"],U=T.elements.name,j=T.elements.description,O=document.forms["new-place"],B=O.elements["place-name"],P=O.elements.link,D=document.querySelector(".profile__image"),M=document.querySelector(".popup_type_avatar"),N=document.forms["avatar-profile"],I=N.elements.link,J=document.querySelector("#card-template").content,G=document.querySelector(".popup__image"),H=document.querySelector(".popup__caption"),V=document.querySelector(".popup_type_image"),z=function(e,t){G.src=t,H.textContent=e,G.alt=e,s(V)};!function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.forEach((function(o){o.addEventListener("input",(function(){!function(e,t,n){if(t.validity.patternMismatch)return t.setCustomValidity(t.dataset.errorMessage),void v(e,t,t.validationMessage,n);t.setCustomValidity(""),y(e,t,n),t.validity.valid?y(e,t,n):v(e,t,t.validationMessage,n)}(e,o,t),h(n,r,t)}))}))}(t,e)}))}(k),g.addEventListener("click",(function(){_(T,k),s(L),U.value=w.textContent,j.value=x.textContent})),C.addEventListener("click",(function(){B.value="",P.value="",_(O,k),s(A)})),O.addEventListener("submit",(function(n){var r;n.preventDefault(),$(n.submitter,!0),(r={name:B.value,link:P.value},fetch("".concat(e.baseUrl,"/cards"),{method:"POST",headers:e.headers,body:JSON.stringify(r)}).then(t)).then((function(e){var t=o(e,J,c,z,l,E,i);q.prepend(t),O.reset(),d(A)})).catch((function(e){console.error(e)})).finally((function(){$(n.submitter,!1)}))})),T.addEventListener("submit",(function(n){var r;n.preventDefault(),$(n.submitter,!0),(r={name:U.value,about:j.value},fetch("".concat(e.baseUrl,"/users/me"),{method:"PATCH",headers:e.headers,body:JSON.stringify(r)}).then(t)).then((function(e){w.textContent=e.name,x.textContent=e.about})).catch((function(e){console.error(e)})).finally((function(){$(n.submitter,!1)})),d(L)})),Promise.all([fetch("".concat(e.baseUrl,"/users/me"),{method:"GET",headers:e.headers}).then(t),fetch("".concat(e.baseUrl,"/cards"),{method:"GET",headers:e.headers}).then(t)]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,i=[],u=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],u=r[1];w.textContent=a.name,x.textContent=a.about,S=a.avatar,E=a._id,D.setAttribute("style","background-image: url('".concat(S,"')")),u.forEach((function(e){var t=o(e,J,c,z,l,a._id,i);q.append(t)}))})).catch((function(e){console.error(e)})),D.addEventListener("click",(function(){I.value="",_(N,k),s(M)})),N.addEventListener("submit",(function(n){var r;n.preventDefault(),D.setAttribute("style","background-image: url('".concat(I.value,"')")),$(n.submitter,!0),(r=I.value,fetch("".concat(e.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:e.headers,body:JSON.stringify({avatar:r})}).then(t)).catch((function(e){console.error(e)})).finally((function(){$(n.submitter,!1)})),N.reset(),d(M)}));var $=function(e,t){e.textContent=t?"Сохранение...":"Сохранить"}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3NGLEVBQWVhLE1BQVEsR0FDdkJ6QyxFQUFnQjJCLEVBQW1CekMsR0FDbkNwQixFQUFVNEQsRUFDZCxJQW1CQUMsRUFBa0JyRixpQkFBaUIsVUFqQlYsU0FBQ29HLEdKcEZFLElBQUNpQixFSXFGekJqQixFQUFJQyxpQkFDSmxCLEVBQWFtQyxhQUNULFFBQVMsMEJBQUZySixPQUE0QnFILEVBQWVhLE1BQUssT0FFM0RHLEVBQWVGLEVBQUlHLFdBQVcsSUp6RkxjLEVJMEZaL0IsRUFBZWEsTUp6RnJCOUgsTUFBTSxHQUFESixPQUFJVixFQUFPQyxRQUFPLG9CQUFvQixDQUM5Q2MsT0FBUSxRQUNSYixRQUFTRixFQUFPRSxRQUNoQitJLEtBQU1DLEtBQUtDLFVBQVUsQ0FBQ1csT0FBUUEsTUFFakM5SSxLQUFLWixJSXFGTGdELE9BQU0sU0FBQUMsR0FDSEMsUUFBUUMsTUFBTUYsRUFDbEIsSUFDQ2tHLFNBQVEsV0FDTFIsRUFBZUYsRUFBSUcsV0FBVyxFQUNsQyxJQUNBbEIsRUFBa0J3QixRQUNsQjdFLEVBQVdvRCxFQUNmLElBSUEsSUFBTWtCLEVBQWlCLFNBQUNyRixFQUFTdUcsR0FDN0J2RyxFQUFRcEIsWUFBYzJILEVBQVksZ0JBQWtCLFdBQ3hELEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvY29tcG9uZW50cy9tb2RhbC5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2NvbXBvbmVudHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbmZpZyA9IHtcclxuICAgIGJhc2VVcmw6ICdodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvd2ZmLWNvaG9ydC0xNCcsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJ2FiMDIyZTFhLWI4MGYtNDkzOS04ZjQ4LWRkYWI3OWZiZWQ2OCcsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgIH0sXHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVSZXNwb25zZSA9IChyZXNwb25zZSkgPT4ge1xyXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICB9XHJcbiAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG59XHJcblxyXG4vL9C/0L7Qu9GD0YfQtdC90LjQtSDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbmV4cG9ydCBjb25zdCBnZXRVc2VyID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxyXG59O1xyXG5cclxuLy/QvtGC0L/RgNCw0LLQutCwINC00LDQvdC90YvRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L3QsCDRgdC10YDQstC10YBcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVzZXIgPSAodXNlcikgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXNlcilcclxuICAgICAgfSlcclxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxyXG59XHJcblxyXG4vL9C/0L7Qu9GD0YfQtdC90LjQtSDQvNCw0YHRgdC40LLQsCDQutCw0YDRgtC+0YfQtdC6XHJcbmV4cG9ydCBjb25zdCBnZXRJbml0aWFsQ2FyZHMgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxyXG59XHJcblxyXG4vL9C+0YLQv9GA0LDQstC60LAg0LrQsNGA0YLQvtGH0LrQuCDQvdCwINGB0LXRgNCy0LXRgFxyXG5leHBvcnQgY29uc3QgY3JlYXRlQ2FyZEFwaSA9IChjYXJkKSA9PiB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FyZClcclxuICAgIH0pXHJcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcclxufVxyXG5cclxuLy/Rg9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60Lgg0YEg0YHQtdGA0LLQtdGA0LBcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRBcGkgPSAoY2FyZElkKSA9PiB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcclxufVxyXG4vL9C+0YLQv9GA0LDQstC60LAg0LvQsNC50LrQsCDQutCw0YDRgtC+0YfQutC4INC90LAg0YHQtdGA0LLQtdGAXHJcbmV4cG9ydCBjb25zdCBwdXNoTGlrZUNhcmRBcGkgPSAoY2FyZElkKSA9PiB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcclxufVxyXG4vL9GD0LTQsNC70LXQvdC40LUg0LvQsNC50LrQsCDQutCw0YDRgtC+0YfQutC4INGBINGB0LXRgNCy0LXRgNCwXHJcbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkTGlrZUFwaSA9IChjYXJkSWQpID0+IHtcclxuICAgIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxyXG59XHJcbi8v0L7RgtC/0YDQsNCy0LrQsCDQvdCwINGB0LXRgNCy0LXRgCDQvdC+0LLQvtCz0L4g0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQsNCy0LDRgtCw0YDQsFxyXG5leHBvcnQgY29uc3QgbmV3QXZhdGFyQXBpID0gKGF2YXRhcikgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHthdmF0YXI6IGF2YXRhcn0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXHJcbn1cclxuIiwiaW1wb3J0IHsgZGVsZXRlQ2FyZEFwaSwgcHVzaExpa2VDYXJkQXBpLFxyXG4gICAgZGVsZXRlQ2FyZExpa2VBcGkgfSBmcm9tICcuL2FwaSdcclxuLy/RhNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNhcmQgPSAoXHJcbiAgICBjYXJkLFxyXG4gICAgY2FyZFRlbXBsYXRlLFxyXG4gICAgZGVsZXRlQ2FyZEZuLFxyXG4gICAgb3BlblBvcHVwSW1hZ2VGbixcclxuICAgIGNhcmRMaWtlc051bWJlckZuLFxyXG4gICAgdXNlcklkLFxyXG4gICAgaGFuZGxlTGlrZXNGblxyXG4pID0+IHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZXNfX2l0ZW0nKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gICAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJyk7XHJcbiAgICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpO1xyXG4gICAgY29uc3QgY2FyZExpa2VzQ29udGFpbmVyID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtY29udGFpbmVyJyk7XHJcblxyXG4gICAgY2FyZEltYWdlLnNyYyA9IGNhcmQubGluaztcclxuICAgIGNhcmRJbWFnZS5hbHQgPSBjYXJkLm5hbWU7XHJcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSBjYXJkLm5hbWU7XHJcbiAgIFxyXG4gICAgLy/Rg9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60LhcclxuICAgIC8v0LXRgdC70Lgg0LrQsNGA0YLQvtGH0LrQsCDRgdC+0LfQtNCw0L3QsCDQvNC90L7QuSwg0L3QsNC20LjQvNCw0LXQvCDQvdCwINC60L7RgNC30LjQvdGDXHJcbiAgICBpZiAoY2FyZC5vd25lci5faWQgPT09IHVzZXJJZCkge1xyXG4gICAgICAgIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZUNhcmRGbihjYXJkLl9pZCwgY2FyZEVsZW1lbnQpfVxyXG4gICAgICAgICl9IGVsc2UgeyAvLyDQuNC90LDRh9C1INC40LrQvtC90LrQsCDQutC+0YDQt9C40L3RiyDQvdC1INC+0YLQvtCx0YDQsNC20LDQtdGC0YHRj1xyXG4gICAgICAgIGNhcmREZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICB9XHJcbiAgICAvL9C90LDQstC10YHQuNC70Lgg0YHQu9GD0YjQsNGC0LXQu9GMINC90LAg0LrQsNGA0YLQuNC90LrRgyDQutCw0YDRgtC+0YfQutC4XHJcbiAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgb3BlblBvcHVwSW1hZ2VGbihjYXJkLm5hbWUsIGNhcmQubGluayk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9C90LDQstC10YHQuNC70Lgg0YHQu9GD0YjQsNGC0LXQu9GMINC90LAg0LrQvdC+0L/QutGDINC70LDQudC60LBcclxuICAgIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGhhbmRsZUxpa2VzRm4oY2FyZExpa2VCdXR0b24sIGNhcmQuX2lkLCBjYXJkTGlrZXNDb250YWluZXIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2FyZExpa2VzTnVtYmVyRm4oY2FyZExpa2VzQ29udGFpbmVyLCBjYXJkLmxpa2VzLmxlbmd0aCk7XHJcblxyXG4gICAgaWYoY2FyZC5saWtlcy5zb21lKGxpa2UgPT4gbGlrZS5faWQgPT09IHVzZXJJZCkpe1xyXG4gICAgICAgbGlrZUNhcmQoY2FyZExpa2VCdXR0b24pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn07XHJcbi8v0YTRg9C90LrRhtC40Y8g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkID0gKGNhcmRJZCwgY2FyZCkgPT4ge1xyXG4gICAgZGVsZXRlQ2FyZEFwaShjYXJkSWQpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ2FyZEVsZW1lbnQoY2FyZClcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG59XHJcblxyXG4vL9GE0YPQvdC60YbQuNGPINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCDQuNC3IERPTVxyXG5leHBvcnQgY29uc3QgZGVsZXRlQ2FyZEVsZW1lbnQgPSAoY2FyZCkgPT4ge1xyXG4gICAgY2FyZC5yZW1vdmUoKTtcclxufTtcclxuLy/RhNGD0L3QutGG0LjRjyDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINC60L3QvtC/0LrQvtC5INC70LDQudC60LBcclxuZXhwb3J0IGNvbnN0IGhhbmRsZUxpa2VzID0gKGVsZW1lbnQsIGNhcmRJZCwgbGlrZSkgPT4ge1xyXG4gICAgY29uc3QgbGlrZU1ldGhvZCA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkX19saWtlLWJ1dHRvbl9pcy1hY3RpdmUnKSA/IGRlbGV0ZUNhcmRMaWtlQXBpIDogcHVzaExpa2VDYXJkQXBpO1xyXG4gICAgbGlrZU1ldGhvZChjYXJkSWQpIFxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgIGxpa2VDYXJkKGVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgIGNhcmRMaWtlc051bWJlcihsaWtlLCByZXMubGlrZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbn1cclxuLy/QvNC10L3Rj9C10YIg0YbQstC10YIg0LvQsNC50LrQvdGD0YLQvtCz0L4g0YHQtdGA0LTQtdGH0LrQsFxyXG5jb25zdCBsaWtlQ2FyZCA9IChlbGVtZW50KSA9PiB7XHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZScpO1xyXG59O1xyXG4vL9C+0YLQvtCx0YDQsNC20LDQtdGCINC60L7Qu9C40YfQtdGB0YLQstC+INC70LDQudC60L7QsiDQvdCwINC60LDRgNGC0L7Rh9C60LVcclxuZXhwb3J0IGNvbnN0IGNhcmRMaWtlc051bWJlciA9IChsaWtlLCBudW1iZXIpID0+IHtcclxuICAgIGxpa2UudGV4dENvbnRlbnQgPSBudW1iZXI7XHJcbn07XHJcbiIsIi8v0YTRg9C90LrRhtC40Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQv9C+0L/QsNC/0LBcclxuZXhwb3J0IGNvbnN0IG9wZW5Qb3B1cCA9IChwb3B1cCkgPT4ge1xyXG4gICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfaXMtb3BlbmVkJyk7XHJcbiAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9pcy1hbmltYXRlZCcpO1xyXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7IC8v0LrQvdC+0L/QutCwINC30LDQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LJcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VQb3B1cE9uRXNjKTtcclxuICAgIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VQb3B1cE9uQ2xpY2tPdXQpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVBvcHVwQnlDbG9zZUJ0bik7XHJcbn07XHJcblxyXG4vL9GE0YPQvdC60YbQuNGPINC30LDQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwXHJcbmV4cG9ydCBjb25zdCBjbG9zZVBvcHVwID0gKHBvcHVwKSA9PiB7XHJcbiAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9pcy1vcGVuZWQnKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VQb3B1cE9uRXNjKTtcclxuICAgIHBvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VQb3B1cE9uQ2xpY2tPdXQpO1xyXG5cclxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpO1xyXG4gICAgY2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVBvcHVwQnlDbG9zZUJ0bik7XHJcbn07XHJcblxyXG4vLyDQt9Cw0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDQv9C+INC60L3QvtC/0LrQtSAo0YUpXHJcbmNvbnN0IGNsb3NlUG9wdXBCeUNsb3NlQnRuID0gKGUpID0+IHtcclxuICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2lzLW9wZW5lZCcpO1xyXG4gICAgY2xvc2VQb3B1cChvcGVuZWRQb3B1cCk7XHJcbn07XHJcblxyXG4vL9C30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC/0L4g0LrQvdC+0L/QutC1IGVzY1xyXG5jb25zdCBjbG9zZVBvcHVwT25Fc2MgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2lzLW9wZW5lZCcpO1xyXG4gICAgICAgIGNsb3NlUG9wdXAob3BlbmVkUG9wdXApO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy/Qt9Cw0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDQutC90L7Qv9C60L7QuSDQvNGL0YjQuCDQt9CwINC/0YDQtdC00LXQu9Cw0LzQuCDQv9C+0L/QsNC/0LBcclxuY29uc3QgY2xvc2VQb3B1cE9uQ2xpY2tPdXQgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICBjbG9zZVBvcHVwKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICB9XHJcbn07XHJcbiIsIi8vINGE0YPQvdC60YbQuNGPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L7RiNC40LHQutC4INC/0YDQuCDQstCw0LvQuNC00LDRhtC40Lgg0L/QvtC70Y9cclxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCB2YWxpZGF0aW9uQ29uZmlnXHJcbikgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxufTtcclxuXHJcbi8v0YTRg9C90LrRhtC40Y8g0YHQutGA0YvRgtC40Y8g0L7RiNC40LHQutC4INC/0YDQuCDQstCw0LvQuNC00LDRhtC40Lgg0L/QvtC70Y9cclxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgdmFsaWRhdGlvbkNvbmZpZykgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG59O1xyXG5cclxuLy/RhNGD0L3QutGG0LjRjyDQtNC70Y8g0LLQsNC70LjQtNCw0YbQuNC4INC/0L7Qu9C10LlcclxuY29uc3QgaXNWYWxpZCA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKSA9PiB7XHJcbiAgICAvL9C/0YDQvtCy0LXRgNC60LAg0L3QsCDRgNC10LPRg9C70Y/RgNC90L7QtSDQstGL0YDQsNC20LXQvdC40LVcclxuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkucGF0dGVybk1pc21hdGNoKSB7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LnNldEN1c3RvbVZhbGlkaXR5KGlucHV0RWxlbWVudC5kYXRhc2V0LmVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5zZXRDdXN0b21WYWxpZGl0eShcIlwiKTtcclxuICAgICAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICAvL9C/0YDQvtCy0LXRgNC60LAg0L3QsCDQstCw0LvQuNC00L3QvtGB0YLRjFxyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgdmFsaWRhdGlvbkNvbmZpZyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vL9C+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YHQvtCx0YvRgtC40LlcclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIHZhbGlkYXRpb25Db25maWcpID0+IHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uQ29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgaXNWYWxpZChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICAgICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHZhbGlkYXRpb25Db25maWcpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLy/Qv9GA0L7QstC10YDQuNGC0YwsINC10YHRgtGMINC70Lgg0YXQvtGC0Y8g0LHRiyDQvtC00L3QviDQvdC10LLQsNC70LjQtNC90L7QtSDQv9C+0LvQtVxyXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSlcclxufTtcclxuXHJcbi8v0LjQt9C80LXQvdC10L3QuNC1INC60L3QvtC/0LrQuCDRhNC+0YDQvNGLINCy0L4g0LLRgNC10LzRjyDQstCw0LvQuNC00LDRhtC40LhcclxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKSA9PiB7XHJcbiAgICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy/QstC60LvRjtGH0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjlxyXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uQ29uZmlnKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgICAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgdmFsaWRhdGlvbkNvbmZpZyk7XHJcbiAgICB9KTtcclxufTtcclxuICBcclxuLy/QvtGH0LjRgdGC0LjRgtGMINCy0LDQu9C40LTQsNGG0LjRjlxyXG5leHBvcnQgY29uc3QgY2xlYXJWYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKSA9PiB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih2YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKVxyXG4gICAgfSk7XHJcblxyXG4gICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKTtcclxufSIsImltcG9ydCB7IGNyZWF0ZUNhcmQsIGRlbGV0ZUNhcmQsIGRlbGV0ZUNhcmRFbGVtZW50LCBjYXJkTGlrZXNOdW1iZXIsIGhhbmRsZUxpa2VzIH0gZnJvbSAnLi9jb21wb25lbnRzL2NhcmQnO1xyXG5pbXBvcnQgeyBvcGVuUG9wdXAsIGNsb3NlUG9wdXAgfSBmcm9tICcuL2NvbXBvbmVudHMvbW9kYWwnO1xyXG5pbXBvcnQgeyBlbmFibGVWYWxpZGF0aW9uLCBjbGVhclZhbGlkYXRpb24gfSBmcm9tICcuL2NvbXBvbmVudHMvdmFsaWRhdGlvbic7XHJcbmltcG9ydCB7XHJcbiAgICBnZXRVc2VyLFxyXG4gICAgZ2V0SW5pdGlhbENhcmRzLFxyXG4gICAgY3JlYXRlVXNlcixcclxuICAgIGNyZWF0ZUNhcmRBcGksXHJcbiAgICBuZXdBdmF0YXJBcGlcclxufSBmcm9tICcuL2NvbXBvbmVudHMvYXBpJztcclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5sZXQgdXNlckF2YXRhciA9ICcnO1xyXG5sZXQgdXNlcklkID0gJyc7XHJcblxyXG5jb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b24tbm90LWFjdGl2ZScsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yLWFjdGl2ZSdcclxufTtcclxuXHJcbi8vIERPTSDRg9C30LvRi1xyXG5jb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZXNfX2xpc3QnKTtcclxuY29uc3QgcG9wdXBFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpOyAvL9C/0L7Qv9Cw0L8g0LTQu9GPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LjQvdGE0L7RgNC80LDRhtC40LhcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTsgLy/QutC90L7Qv9C60LAg0LrQsNGA0LDQvdC00LDRiNC40LrQsFxyXG5cclxuY29uc3Qgb3BlblBvcHVwQWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX25ldy1jYXJkJyk7IC8v0L/QvtC/0LDQvyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuXHJcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpOyAvLyDQuNC80Y8g0L/RgNC+0YTQuNC70Y9cclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyk7IC8vINC30LDQvdGP0YLQuNC1INC/0YDQvtGE0LjQu9GPXHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zWydlZGl0LXByb2ZpbGUnXTsgLy/RhNC+0YDQvNCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y9cclxuY29uc3QgbmFtZUlucHV0ID0gZWRpdFByb2ZpbGVGb3JtLmVsZW1lbnRzLm5hbWU7IC8v0LLQstC10LTQtdC90L3QvtC1INC40LzRjyDQsiDRhNC+0YDQvNC1XHJcbmNvbnN0IGpvYklucHV0ID0gZWRpdFByb2ZpbGVGb3JtLmVsZW1lbnRzLmRlc2NyaXB0aW9uOyAvLyDQstCy0LXQtNC10L3QvdC+0LUg0LfQsNC90Y/RgtC40LUg0LIg0YTQvtGA0LzQtVxyXG5cclxuY29uc3QgbmV3UGxhY2VGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ25ldy1wbGFjZSddOyAvL9GE0L7RgNC80LAg0YHQvtC30LTQsNC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgaW5wdXROZXdQbGFjZU5hbWUgPSBuZXdQbGFjZUZvcm0uZWxlbWVudHNbJ3BsYWNlLW5hbWUnXTtcclxuY29uc3QgaW5wdXROZXdQbGFjZUxpbmsgPSBuZXdQbGFjZUZvcm0uZWxlbWVudHMubGluaztcclxuXHJcbmNvbnN0IHByb2ZpbGVJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZScpOyAvL9Cw0LLQsNGC0LDRgFxyXG5jb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2F2YXRhcicpOy8v0L/QvtC/0LDQvyDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQsNCy0LDRgtCw0YDQsFxyXG5jb25zdCBhdmF0YXJQcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zWydhdmF0YXItcHJvZmlsZSddOyAvL9GE0L7RgNC80LAg0LjQt9C80LXQvdC10L3QuNGPINCw0LLQsNGC0LDRgNCwXHJcbmNvbnN0IHVybEF2YXRhcklucHV0ID0gYXZhdGFyUHJvZmlsZUZvcm0uZWxlbWVudHMubGluazsvL9C/0L7Qu9C1INC00LvRjyDQstCy0L7QtNCwINGB0YHRi9C70LrQuCDQvdCwINC60LDRgNGC0LjQvdC60YNcclxuXHJcbi8vINCi0LXQvNC/0LvQtdC50YIg0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC10ZW1wbGF0ZScpLmNvbnRlbnQ7XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpOyAvLyDQutCw0YDRgtC40L3QutCwINCyINC/0L7Qv9Cw0L/QtVxyXG5jb25zdCB0aXRsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7IC8v0LfQsNCz0L7Qu9C+0LLQvtC6XHJcbmNvbnN0IHBvcHVwVHlwZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfaW1hZ2UnKTsgLy/Qv9C+0L/QsNC/INGBINC60LDRgNGC0LjQvdC60L7QuVxyXG5cclxuY29uc3Qgb3BlblBvcHVwSW1hZ2UgPSAobmFtZSwgbGluaykgPT4ge1xyXG4gICAgaW1hZ2VQb3B1cC5zcmMgPSBsaW5rO1xyXG4gICAgdGl0bGVQb3B1cC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBpbWFnZVBvcHVwLmFsdCA9IG5hbWU7XHJcbiAgICBvcGVuUG9wdXAocG9wdXBUeXBlSW1hZ2UpOyAvL9C+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINGBINC40LfQvtCx0YDQsNC20LXQvdC40LXQvCDQutCw0YDRgtC40L3QutC4XHJcbn07XHJcblxyXG4vL9Cy0LDQu9C40LTQsNGG0LjRj1xyXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xyXG5cclxuLy8g0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0LTQu9GPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBjbGVhclZhbGlkYXRpb24oZWRpdFByb2ZpbGVGb3JtLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICAgIG9wZW5Qb3B1cChwb3B1cEVkaXQpO1xyXG4gICAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xyXG4gICAgam9iSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcbn0pO1xyXG5cclxuLy/QvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60Lhcclxub3BlblBvcHVwQWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGlucHV0TmV3UGxhY2VOYW1lLnZhbHVlID0gXCJcIjtcclxuICAgIGlucHV0TmV3UGxhY2VMaW5rLnZhbHVlID0gXCJcIjtcclxuICAgIGNsZWFyVmFsaWRhdGlvbihuZXdQbGFjZUZvcm0sIHZhbGlkYXRpb25Db25maWcpO1xyXG4gICAgb3BlblBvcHVwKG5ld0NhcmRQb3B1cCk7XHJcbn0pO1xyXG4vL9C30LDQv9C+0LvQvdC10L3QuNC1INGE0L7RgNC80Ysg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XHJcbm5ld1BsYWNlRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHNldExvYWRpbmdUZXh0KGV2dC5zdWJtaXR0ZXIsIHRydWUpXHJcbiAgICAvL9C+0YLQv9GA0LDQstC60LAg0LrQsNGA0YLQvtGH0LrQuCDQvdCwINGB0LXRgNCy0LXRgFxyXG4gICAgY3JlYXRlQ2FyZEFwaSh7IG5hbWU6IGlucHV0TmV3UGxhY2VOYW1lLnZhbHVlLCBsaW5rOiBpbnB1dE5ld1BsYWNlTGluay52YWx1ZSB9KVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChcclxuICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgY2FyZFRlbXBsYXRlLFxyXG4gICAgICAgICAgICBkZWxldGVDYXJkLFxyXG4gICAgICAgICAgICBvcGVuUG9wdXBJbWFnZSxcclxuICAgICAgICAgICAgY2FyZExpa2VzTnVtYmVyLFxyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGhhbmRsZUxpa2VzXHJcbiAgICAgICAgKVxyXG4gICAgLy/QvtGC0L7QsdGA0LDQttC10L3QuNC1INC60LDRgNGC0L7Rh9C60Lgg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAgICBjYXJkc0NvbnRhaW5lci5wcmVwZW5kKGNhcmQpO1xyXG4gICAgLy/QvtGH0LjRgdGC0LrQsCDRhNC+0YDQvNGLXHJcbiAgICBuZXdQbGFjZUZvcm0ucmVzZXQoKTtcclxuICAgIGNsb3NlUG9wdXAobmV3Q2FyZFBvcHVwKTsvL9C30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBzZXRMb2FkaW5nVGV4dChldnQuc3VibWl0dGVyLCBmYWxzZSlcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vINGE0YPQvdC60YbQuNGPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0YTQvtGA0LzRiyDQv9GA0L7RhNC40LvRjyDQuCDQvtGC0L/RgNCw0LLQutC4INC00LDQvdC90YvRhSDQvdCwINGB0LXRgNCy0LXRgFxyXG5jb25zdCBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXQgPSAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHNldExvYWRpbmdUZXh0KGV2dC5zdWJtaXR0ZXIsIHRydWUpO1xyXG4gICAgY3JlYXRlVXNlcih7IG5hbWU6IG5hbWVJbnB1dC52YWx1ZSwgYWJvdXQ6IGpvYklucHV0LnZhbHVlIH0pXHJcbiAgICAudGhlbih1c2VyID0+IHtcclxuICAgICAgICBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSB1c2VyLm5hbWU7XHJcbiAgICAgICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlci5hYm91dDtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHNldExvYWRpbmdUZXh0KGV2dC5zdWJtaXR0ZXIsIGZhbHNlKVxyXG4gICAgfSk7XHJcblxyXG4gICAgY2xvc2VQb3B1cChwb3B1cEVkaXQpO1xyXG59O1xyXG4vL9C90LDQstC10YHQuNC70Lgg0YHQu9GD0YjQsNGC0LXQu9GMINC90LAg0YTQvtGA0LzRgyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcbmVkaXRQcm9maWxlRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXQpO1xyXG5cclxuLy/QvtGC0L7QsdGA0LDQttC10L3QuNC1INC60LDRgNGC0L7Rh9C10Log0Lgg0LTQsNC90L3Ri9GFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDRgSDRgdC10YDQstC10YDQsFxyXG5Qcm9taXNlLmFsbChbZ2V0VXNlcigpLCBnZXRJbml0aWFsQ2FyZHMoKV0pXHJcbi50aGVuKChbdXNlciwgY2FyZHNdKSA9PiB7XHJcbiAgICBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSB1c2VyLm5hbWU7XHJcbiAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB1c2VyLmFib3V0O1xyXG4gICAgdXNlckF2YXRhciA9IHVzZXIuYXZhdGFyO1xyXG4gICAgdXNlcklkID0gdXNlci5faWQ7XHJcbiAgICBwcm9maWxlSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgYGJhY2tncm91bmQtaW1hZ2U6IHVybCgnJHt1c2VyQXZhdGFyfScpYCk7XHJcbiAgICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKFxyXG4gICAgICAgICAgICBjYXJkLFxyXG4gICAgICAgICAgICBjYXJkVGVtcGxhdGUsXHJcbiAgICAgICAgICAgIGRlbGV0ZUNhcmQsXHJcbiAgICAgICAgICAgIG9wZW5Qb3B1cEltYWdlLFxyXG4gICAgICAgICAgICBjYXJkTGlrZXNOdW1iZXIsXHJcbiAgICAgICAgICAgIHVzZXIuX2lkLFxyXG4gICAgICAgICAgICBoYW5kbGVMaWtlcyxcclxuICAgICAgICApO1xyXG4gICAgICAgIGNhcmRzQ29udGFpbmVyLmFwcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9KTtcclxufSlcclxuLmNhdGNoKGVyciA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbn0pXHJcblxyXG4vL9C+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC00LvRjyDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxucHJvZmlsZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgdXJsQXZhdGFySW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgY2xlYXJWYWxpZGF0aW9uKGF2YXRhclByb2ZpbGVGb3JtLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICAgIG9wZW5Qb3B1cChwb3B1cEF2YXRhcilcclxufSlcclxuLy/Qt9Cw0L/QvtC70L3QtdC90LjQtSDRhNC+0YDQvNGLINGBINCw0LLQsNGC0LDRgNC+0Lwg0Lgg0L7RgtC/0YDQsNCy0LrQsCDQtNCw0L3QvdGL0YUg0L3QsCDRgdC10YDQstC10YBcclxuY29uc3QgYXZhdGFyRm9ybVN1Ym1pdCA9IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgcHJvZmlsZUltYWdlLnNldEF0dHJpYnV0ZShcclxuICAgICAgICBcInN0eWxlXCIsIGBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7dXJsQXZhdGFySW5wdXQudmFsdWV9JylgXHJcbiAgICApXHJcbiAgICBzZXRMb2FkaW5nVGV4dChldnQuc3VibWl0dGVyLCB0cnVlKVxyXG4gICAgbmV3QXZhdGFyQXBpKHVybEF2YXRhcklucHV0LnZhbHVlKVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBzZXRMb2FkaW5nVGV4dChldnQuc3VibWl0dGVyLCBmYWxzZSlcclxuICAgIH0pO1xyXG4gICAgYXZhdGFyUHJvZmlsZUZvcm0ucmVzZXQoKTtcclxuICAgIGNsb3NlUG9wdXAocG9wdXBBdmF0YXIpO1xyXG59XHJcbi8v0L3QsNCy0LXRgdC40LvQuCDRgdC70YPRiNCw0YLQtdC70Ywg0L3QsCDRhNC+0YDQvNGDINGBINCw0LLQsNGC0LDRgNC+0LxcclxuYXZhdGFyUHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYXZhdGFyRm9ybVN1Ym1pdClcclxuLy/RhNGD0L3QutGG0LjRjywg0LzQtdC90Y/RjtGJ0LDRjyDRgtC10LrRgdGCINC60L3QvtC/0LrQuCDQstC+INCy0YDQtdC80Y8g0L7QttC40LTQsNC90LjRjyDQvtGC0L/RgNCw0LLQutC4INGE0L7RgNC80YtcclxuY29uc3Qgc2V0TG9hZGluZ1RleHQgPSAoZWxlbWVudCwgaXNMb2FkaW5nKSA9PiB7XHJcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gaXNMb2FkaW5nID8gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiIDogXCLQodC+0YXRgNCw0L3QuNGC0YxcIjtcclxufVxyXG4iXSwibmFtZXMiOlsiY29uZmlnIiwiYmFzZVVybCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiaGFuZGxlUmVzcG9uc2UiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJjb25jYXQiLCJzdGF0dXMiLCJwdXNoTGlrZUNhcmRBcGkiLCJjYXJkSWQiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJkZWxldGVDYXJkTGlrZUFwaSIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiY2FyZFRlbXBsYXRlIiwiZGVsZXRlQ2FyZEZuIiwib3BlblBvcHVwSW1hZ2VGbiIsImNhcmRMaWtlc051bWJlckZuIiwidXNlcklkIiwiaGFuZGxlTGlrZXNGbiIsImNhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImNsb25lTm9kZSIsImNhcmRJbWFnZSIsImNhcmRUaXRsZSIsImNhcmREZWxldGVCdXR0b24iLCJjYXJkTGlrZUJ1dHRvbiIsImNhcmRMaWtlc0NvbnRhaW5lciIsInNyYyIsImxpbmsiLCJhbHQiLCJuYW1lIiwidGV4dENvbnRlbnQiLCJvd25lciIsIl9pZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJsaWtlcyIsImxlbmd0aCIsInNvbWUiLCJsaWtlIiwibGlrZUNhcmQiLCJkZWxldGVDYXJkIiwiZGVsZXRlQ2FyZEFwaSIsImRlbGV0ZUNhcmRFbGVtZW50IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJyZW1vdmUiLCJoYW5kbGVMaWtlcyIsImVsZW1lbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlcyIsImNhcmRMaWtlc051bWJlciIsInRvZ2dsZSIsIm51bWJlciIsIm9wZW5Qb3B1cCIsInBvcHVwIiwiYWRkIiwiY2xvc2VCdXR0b24iLCJ3aW5kb3ciLCJjbG9zZVBvcHVwT25Fc2MiLCJjbG9zZVBvcHVwT25DbGlja091dCIsImNsb3NlUG9wdXBCeUNsb3NlQnRuIiwiY2xvc2VQb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwib3BlbmVkUG9wdXAiLCJkb2N1bWVudCIsImtleSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJzaG93SW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbkNvbmZpZyIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImNsZWFyVmFsaWRhdGlvbiIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JFYWNoIiwidXNlckF2YXRhciIsImZvcm1TZWxlY3RvciIsImNhcmRzQ29udGFpbmVyIiwicG9wdXBFZGl0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJvcGVuUG9wdXBBZGRDYXJkQnV0dG9uIiwibmV3Q2FyZFBvcHVwIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiZWRpdFByb2ZpbGVGb3JtIiwiZm9ybXMiLCJuYW1lSW5wdXQiLCJlbGVtZW50cyIsImpvYklucHV0IiwiZGVzY3JpcHRpb24iLCJuZXdQbGFjZUZvcm0iLCJpbnB1dE5ld1BsYWNlTmFtZSIsImlucHV0TmV3UGxhY2VMaW5rIiwicHJvZmlsZUltYWdlIiwicG9wdXBBdmF0YXIiLCJhdmF0YXJQcm9maWxlRm9ybSIsInVybEF2YXRhcklucHV0IiwiY29udGVudCIsImltYWdlUG9wdXAiLCJ0aXRsZVBvcHVwIiwicG9wdXBUeXBlSW1hZ2UiLCJvcGVuUG9wdXBJbWFnZSIsInBhdHRlcm5NaXNtYXRjaCIsInNldEN1c3RvbVZhbGlkaXR5IiwiZGF0YXNldCIsInZhbGlkYXRpb25NZXNzYWdlIiwiaXNWYWxpZCIsInNldEV2ZW50TGlzdGVuZXJzIiwiZW5hYmxlVmFsaWRhdGlvbiIsInZhbHVlIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJzZXRMb2FkaW5nVGV4dCIsInN1Ym1pdHRlciIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsInByZXBlbmQiLCJyZXNldCIsImZpbmFsbHkiLCJ1c2VyIiwiYWJvdXQiLCJhbGwiLCJfcmVmIiwiX3JlZjIiLCJjYXJkcyIsImF2YXRhciIsInNldEF0dHJpYnV0ZSIsImFwcGVuZCIsImlzTG9hZGluZyJdLCJzb3VyY2VSb290IjoiIn0=